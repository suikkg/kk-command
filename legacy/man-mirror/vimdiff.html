<!DOCTYPE html><html lang="zh-cn">
<!-- Mirrored from man.niaoge.com/vimdiff by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 10 Jan 2026 15:03:17 GMT -->
<head>
<meta charset="UTF-8"/><meta name="renderer" content="webkit"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"/><link href="public/style.css" rel="stylesheet" type="text/css" />
<link href="public/index.css" rel="stylesheet" type="text/css" />
<link href="public/img/favicon.ico" type="image/x-icon" rel="shortcut icon">
<script src="https://apps.bdimg.com/libs/jquery/1.10.2/jquery.min.js"></script><script src="public/main.js"></script><title>vimdiff命令_Linux vimdiff 命令用法详解：</title></head><body><div id="header" class="clearfix"><h2 id="logo" class="left"><a title="Linux命令大全" href="index.html">Linux命令大全</a></h2><ul id="menu-main" class="right toggle-target"><li id="menu-item-4" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-4"><a href="index.html">首页搜索</a></li><li id="menu-item-6" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-6"><a href="par/2.html">系统管理</a></li><li id="menu-item-7" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-7"><a href="par/5.html">网络管理</a></li><li id="menu-item-8" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-8"><a href="par/4.html">软件·打印·开发·工具</a></li><li id="menu-item-9" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-9"><a href="par/1.html">文件和目录管理</a></li><li id="menu-item-10" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-10"><a href="par/3.html">硬件·内核·Shell·监测</a></li></ul> <span id="menu-main-toggle" class="toggle-btn" toggle-target="#menu-main"></span></div><div id="main-single" class="main-layout clearfix"><div class="right arc-wrap"><div id="position-wrap" class="clearfix"><div class="position left">当前位置：<a href="index.html">首页</a> &raquo; <a href="par/1.html" rel="category tag">文件和目录管理</a> &raquo; vimdiff</div></div><div id="title" class="clearfix"><h1 class="left">vimdiff命令</h1><div class="right"></div></div><div id="arc-body"><p><strong>vimdiff 快速比较和合并少量文件</strong></p><p>纯文本文件比较和合并工具一直是软件开发过程中比较重要的组成部分，vimdiff 能够在比较出来的多处差异之间快速定位，很容易的进行文件合并操作。<br/> 在需要快速比较和合并少量文件的时候，vimdiff是很好的选择。</p><p>vimdiff 基本用法：</p><p>首先保证系统中的<span class="wp_keywordlink"><a href="diff.html" title="diff命令" target="_blank">diff</a></span>命令是可用的。Vim的diff模式是依赖于diff命令的。</p><p><strong>启动方法</strong><br/> 1. vimdiff file1 file2 …<br/> 2. vim -d file1 file2 …</p><p><strong>差异点跳转</strong></p><p>接下来试试在行间移动光标，可以看到左右两侧的屏幕滚动是同步的。这是因为"scrollbind"选项被设置了的结果，vim会尽力保证两侧文件的对齐。如果不想要这个特性，可以设置：</p><div class="ibm-syntax-container"><div><div id="highlighter_675897" class="syntaxhighlighter  htmlscript"><table role="none" border="0" cellspacing="0" cellpadding="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">:<span class="wp_keywordlink"><a href="set.html" title="set命令" target="_blank">set</a></span> noscrollbind</code></div></div></td></tr></tbody></table></div></div></div><p>可以使用快捷键在各个差异点之间快速移动。跳转到下一个差异点：</p><div class="ibm-syntax-container"><div id="highlighter_551751" class="syntaxhighlighter  htmlscript">       <strong>]c 下一个差异点</strong></div></div><p>反向跳转是：</p><p><strong>[c 上一个差异点</strong></p><p>如果在命令前加上数字的话，可以跳过一个或数个差异点，从而实现跳的更远。比如如果在位于第一个差异点的行输入"2]c"，将越过下一个差异点，跳转到第三个差异点。</p><p><strong>      n]c 转到下面第n个差异点,n为数字</strong></p><p>&nbsp;</p><p><strong>文件合并</strong></p><p>文件比较的最终目的之一就是合并，以消除差异。如果希望把一个差异点中当前文件的内容复制到另一个文件里，可以使用命令</p><div class="ibm-syntax-container"><div><div id="highlighter_962063" class="syntaxhighlighter  htmlscript"><table role="none" border="0" cellspacing="0" cellpadding="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">dp （diff "put"）</code></div></div></td></tr></tbody></table></div></div></div><p>如果希望把另一个文件的内容复制到当前行中，可以使用命令</p><div class="ibm-syntax-container"><div><div id="highlighter_376700" class="syntaxhighlighter  htmlscript"><table role="none" border="0" cellspacing="0" cellpadding="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">do (diff "get"，之所以不用dg，是因为dg已经被另一个命令占用了)</code></div></div></td></tr></tbody></table></div></div></div><p>如果希望手工修改某一行，可以使用通常的vim操作。如果希望在两个文件之间来回跳转，可以用下列命令序列：</p><div class="ibm-syntax-container"><div><div id="highlighter_556703" class="syntaxhighlighter  htmlscript"><table role="none" border="0" cellspacing="0" cellpadding="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">Ctrl-<span class="wp_keywordlink"><a href="w.html" title="w命令" target="_blank">w</a></span>, w</code></div></div></td></tr></tbody></table></div></div></div><p>在修改一个或两个文件之后，vimdiff会试图自动来重新比较文件，来实时反映比较结果。但是也会有处理失败的情况，这个时候需要手工来刷新比较结果：</p><div class="ibm-syntax-container"><div><div id="highlighter_236170" class="syntaxhighlighter  htmlscript"><table role="none" border="0" cellspacing="0" cellpadding="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">:diffupdate</code></div></div></td></tr></tbody></table></div></div></div><p>如果希望撤销修改，可以和平常用vim编辑一样，直接</p><div class="ibm-syntax-container"><div><div id="highlighter_635129" class="syntaxhighlighter  htmlscript"><table role="none" border="0" cellspacing="0" cellpadding="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">ESC</code><code class="htmlscript plain">&gt;, u</code></div></div></td></tr></tbody></table></div></div></div><p>但是要注意一定要将光标移动到需要撤销修改的文件窗口中。</p><h2 id="N100D5" class="ibm-h2">同时操作两个文件</h2><p>在比较和合并告一段落之后，可以用下列命令对两个文件同时进行操作。比如同时退出：</p><div class="ibm-syntax-container"><div><div id="highlighter_635711" class="syntaxhighlighter  htmlscript"><table role="none" border="0" cellspacing="0" cellpadding="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">:qa （quit all）</code></div></div></td></tr></tbody></table></div></div></div><p>如果希望保存全部文件：</p><div class="ibm-syntax-container"><div><div id="highlighter_497187" class="syntaxhighlighter  htmlscript"><table role="none" border="0" cellspacing="0" cellpadding="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">:wa （<span class="wp_keywordlink"><a href="write.html" title="write命令" target="_blank">write</a></span> all）</code></div></div></td></tr></tbody></table></div></div></div><p>或者是两者的合并命令，保存全部文件，然后退出：</p><div class="ibm-syntax-container"><div><div id="highlighter_418877" class="syntaxhighlighter  htmlscript"><table role="none" border="0" cellspacing="0" cellpadding="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">:wqa （write, then quit all）</code></div></div></td></tr></tbody></table></div></div></div><p>如果在退出的时候不希望保存任何操作的结果：</p><div class="ibm-syntax-container"><div><div id="highlighter_626256" class="syntaxhighlighter  htmlscript"><table role="none" border="0" cellspacing="0" cellpadding="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">:qa! （force to quit all）</code></div></div></td></tr></tbody></table></div></div></div><p>dp 当前差异点复制到另一个文件(diff put)<br/> do 差异点复制到当前文件(diff get, 不用dg是因为已被另一命令占用了)<br/> :diffupdate 修改后的更新，vimdiff也会自动来重新比较<br/> u 撤销修改</p><p><strong>上下文展开和查看</strong></p><p>比较和合并文件的时候经常需要结合上下文来确定最终要采取的操作。Vimdiff 缺省是会把不同之处上下各 6 行的文本都显示出来以供参考。其他的相同的文本行被自动折叠。如果希望修改缺省的上下文行数，可以这样设置：</p><div class="ibm-syntax-container"><div><div id="highlighter_845299" class="syntaxhighlighter  htmlscript"><table role="none" border="0" cellspacing="0" cellpadding="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">:set diffopt=context:3</code></div></div></td></tr></tbody></table></div></div></div><p>可以用简单的折叠命令来临时展开被折叠的相同的文本行：</p><div class="ibm-syntax-container"><div><div id="highlighter_307633" class="syntaxhighlighter  htmlscript"><table role="none" border="0" cellspacing="0" cellpadding="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">zo （folding open，之所以用z这个字母，是因为它看上去比较像折叠着的纸）</code></div></div></td></tr></tbody></table></div></div></div><p>然后可以用下列命令来重新折叠：</p><div class="ibm-syntax-container"><div><div id="highlighter_660697" class="syntaxhighlighter  htmlscript"><table role="none" border="0" cellspacing="0" cellpadding="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">zc （folding close）</code></div></div></td></tr></tbody></table></div></div></div><p>下图是设置上下文为3行，并展开了部分相同文本的vimdiff屏幕：</p><h5 id="N10121" class="ibm-h5"><img class="lazyload ibm-downsize" src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20553%20339%22%3E%3C/svg%3E" data-src="https://www.ibm.com/developerworks/cn/linux/l-vimdiff/images/image004.jpg" alt="" width="553" height="339"/></h5><p><strong>使用颜色说明</strong></p><p># 比较文件连续的相同行被折叠<br/> # 只在某一文件存的行背景设置成蓝色，其他文件为绿色<br/> # 比较文件都有并包含差异的行设置成粉色背景，差异的文字用红色背景标注</p><p>&nbsp;</p><h2 id="N1012B" class="ibm-h2">结论</h2><p>在无法使用图形化的比较工具的时候，或者在需要快速比较和合并少量文件的时候，Vimdiff是最好的选择。</p></div></div><div id="sidebar" class="left"><div class="box"><h3 class="title">相关命令</h3><ul class="body list-col-1 clearfix"></ul></div><div id="sidebar_search_box" class="box"><form action="https://man.niaoge.com/" method="post"> <input class="search-input " type="text" name="ss" id="ss" value="命令直达(输入完整命令)" onfocus="if (value =='命令直达(输入完整命令)'){value =''}" onblur="if (value ==''){value='命令直达(输入完整命令)'}"/> <input class="search-submit button mobile-visible" type="submit" value="进入"/></form></div><div class="box"><h3 class="title"><a href="download/index.html">Linux下载</a></h3><ul class="body list-col-1 clearfix"><li><a href="download/Ubuntu.html">Ubuntu下载</a></li><li><a href="download/CentOS.html">CentOS下载</a></li></ul></div></div></div> ﻿<div id="footer-wrap"><div id="btn-backtop" title="返回顶部">返回顶部↑</div><div id="footer"><div class="info box"> <a href="index.html" title="Linux命令大全">Linux命令大全</a> <span class="split"></span> <a href="about_us.html" title="关于/联系">关于/联系</a> <span class="split"></span> 收藏本站请使用Ctrl+D <span class="split"></span> <a href="shell-script/index.html" target="_blank">Shell脚本攻略</a> <span class="split"></span> <a href="shell-regex.html" target="_blank">Shell正则表达式</a> <span class="split"></span> 共收录 <span style="font-size: 16px; color:#74b147;">593</span> 条Linux系统命令</div><div class="desc box">在Linux命令大全（man.niaoge.com）可以查询您所需要的Linux命令教程和相关实例。如果您觉得本站内容对您有所帮助，请推荐给更多需要帮助的人。</div></div></div> <script> var _hmt = _hmt || []; (function() { var hm = document.createElement("script"); hm.src = "https://hm.baidu.com/hm.js?9afbd88b4e674f3b4af0a760c48a00ac"; var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s); })(); </script></body>
<!-- Mirrored from man.niaoge.com/vimdiff by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 10 Jan 2026 15:03:17 GMT -->
</html>
